============================= test session starts =============================
platform win32 -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
rootdir: D:\EvalForge
plugins: anyio-4.11.0, Faker-37.11.0, langsmith-0.4.38, asyncio-1.2.0, cov-7.0.0, env-1.2.0, httpx-0.35.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1 item

tests/backend/test_boss_oracle_orchestrator_prime_smoke.py::test_oracle_orchestrator_prime_boss_judge_smoke FAILED [100%]

================================== FAILURES ===================================
_______________ test_oracle_orchestrator_prime_boss_judge_smoke _______________

client = <httpx.AsyncClient object at 0x000001A7A390F230>
db_session = <sqlalchemy.orm.session.AsyncSession object at 0x000001A7A3A0E270>

    @pytest.mark.asyncio
    async def test_oracle_orchestrator_prime_boss_judge_smoke(client, db_session):
        """
        Smoke test: ensure Oracle Orchestrator Prime boss QA returns a valid BossEvalResult.
        """
        import os
        os.environ["EVALFORGE_MOCK_GRADING"] = "1"
    
        from arcade_app.models import BossDefinition
    
        # Seed the boss
        boss_slug = "boss-oracle-orchestrator-prime"
        # ... (existing setup code) ...
    
        # ... (payload) ...
    
>       resp = await client.post("/api/dev/boss_qa/worlds", json=payload)
                                                                 ^^^^^^^
E       UnboundLocalError: cannot access local variable 'payload' where it is not associated with a value

tests\backend\test_boss_oracle_orchestrator_prime_smoke.py:19: UnboundLocalError
============================== warnings summary ===============================
C:\Users\pierr\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_config.py:323
  C:\Users\pierr\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

arcade_app\agent.py:449
  D:\EvalForge\arcade_app\agent.py:449: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

C:\Users\pierr\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:4523
  C:\Users\pierr\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:4523: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    return self.router.on_event(event_type)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/backend/test_boss_oracle_orchestrator_prime_smoke.py::test_oracle_orchestrator_prime_boss_judge_smoke
======================== 1 failed, 3 warnings in 0.88s ========================
